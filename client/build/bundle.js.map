{"version":3,"sources":["webpack:///webpack/bootstrap 1408cfe8bcbb6c76ef59","webpack:///./src/app.js","webpack:///./src/models/mapWrapper.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,IAAI,OAAO,KAAK;AAC/E;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iEAAiE,IAAI,OAAO,KAAK;AACjF;AACA;AACA;AACA;;AAEA;AACA,mDAAmD,cAAc;AACjE;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;;;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA,uBAAuB,kBAAkB;AACzC,WAAW;AACX;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,WAAW;AACX;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,iBAAiB,wBAAwB,aAAa,wBAAwB;AAC9E;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1408cfe8bcbb6c76ef59","var MapWrapper = require('./models/mapWrapper');\n\nvar makeRequest = function(url, callback){\n  var request = new XMLHttpRequest();\n  console.log(\"request made\");\n  request.open(\"GET\", url);\n  console.log(\"url accessed\");\n  request.addEventListener(\"load\", callback);\n  request.send();\n};\n\nvar requestCompleteFav = function(){\n  if (this.status !== 200) return console.log(\"request failed\");\n  console.log('database accessed');\n  var jsonString = this.responseText;\n  var dbData = JSON.parse(jsonString);\n  console.log(dbData);\n  showFavInfo(dbData);\n}\n\nvar requestCompleteFavSun = function(){\n  if (this.status !== 200) return console.log(\"request failed\");\n  console.log('api accessed');\n  var jsonString = this.responseText;\n  var apiData = JSON.parse(jsonString);\n  displayFavSun(apiData);\n}\n\nvar displayFavSun = function(apiData){\n  var pop = document.getElementById(\"hidden\");\n  pop.textContent = apiData.results.sunrise;\n  pop.classList.toggle('show');\n}\n\nvar showFavInfo = function(dbData){\n  for(fav of dbData){\n    var ul = document.getElementById(\"fav-list\");\n    var li = document.createElement(\"li\");\n    // li.addEventListener(\"click\", function(){\n    // var input = this.getElementsByTagName('input');\n    // var lat = input[0].value.split(',')[0];\n    // var long = input[0].value.split(',')[1];\n    // var newUrl = `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${long}`;\n    // makeRequest(newUrl, requestCompleteFavSun);\n    // });\n    li.className = \"list-group-item\";\n    li.innerHTML = '<form action=\"/places/' + fav._id + '/delete\" method=\"POST\"><input type=\"hidden\" value=\"' + fav.latitude + ',' + fav.longitude + '\">' + fav.name + '<button type=\"submit\" class=\"pull-right btn btn-secondary\">Delete</button></form><button id=\"sunriseBtn\" type=\"button\" class=\"searchBtn btn btn-primary pull-right\"> Get sunrise</button>';\n    ul.append(li);\n  }\n};\n\n\n\nvar requestComplete = function(){\n  if(this.status !== 200) return;\n  var jsonString = this.responseText;\n  var apiData = JSON.parse(jsonString);\n  console.log(apiData);\n  showSunInfo(apiData);\n  calculateTime(apiData);\n};\n\nvar showSunInfo = function(apiData){\n  var sunriseTime = document.getElementById('sunrise');\n  sunriseTime.innerHTML = apiData.results.sunrise;\n  var sunsetTime = document.getElementById('sunset');\n  sunsetTime.innerHTML = apiData.results.sunset;\n};\n\nvar getLatLong = function(){\n  var target = document.getElementById('latitude');\n  var lat = document.getElementById('latitude').value;\n  var long = document.getElementById('longitude').value;\n  if(target.className == \"locationAdded\"){\n     var sunriseurl = `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${long}`;\n     makeRequest(sunriseurl, requestComplete);\n     target.className = \"\";\n  };\n};\n\nvar calculateTime = function(apiData){\n  var presentTime = new Date().toLocaleTimeString({hour12: false});\n  console.log(presentTime);\n  var sunriseTime = apiData.results.sunrise;\n  console.log(sunriseTime)\n}\n\nvar createMap = function(){\n  var container = document.getElementById(\"map\");\n  var center = { lat: 56.740674, lng: -4.2187500 };\n  var zoom = 7;\n  mainMap = new MapWrapper(container, center, zoom);\n\n  // geolocation\n  mainMap.userLocation();\n  // search box\n  mainMap.createSearchBox();\n\n};\n\nvar app = function(){\n  window.scrollTo(0, 0);\n  var url = \"/places\";\n  makeRequest(url, requestCompleteFav);\n\n  createMap();\n  setTimeout(function() {\n    getLatLong();\n  }, 5000);\n\n  var googlemap = document.getElementById(\"map\");\n  googlemap.addEventListener('change', function(){\n    getLatLong();\n  });\n  $(function () {\n    $('[data-toggle=\"popover\"]').popover()\n  });\n  $('.popover-dismiss').popover({\n  trigger: 'focus'\n})\n\n};\nwindow.addEventListener('load', app);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.js\n// module id = 0\n// module chunks = 0","\nvar MapWrapper = function(container, coords, zoom){\n  this.googleMap = new google.maps.Map(container, {\n    center: coords,\n    zoom: zoom,\n    styles:  [{\n            elementType: 'geometry',\n            stylers: [{color: '#f5f5f5'}]\n          },\n          {\n            elementType: 'labels.icon',\n            stylers: [{visibility: 'off'}]\n          },\n          {\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#616161'}]\n          },\n          {\n            elementType: 'labels.text.stroke',\n            stylers: [{color: '#f5f5f5'}]\n          },\n          {\n            featureType: 'administrative.land_parcel',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#bdbdbd'}]\n          },\n          {\n            featureType: 'poi',\n            elementType: 'geometry',\n            stylers: [{color: '#eeeeee'}]\n          },\n          {\n            featureType: 'poi',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#757575'}]\n          },\n          {\n            featureType: 'poi.park',\n            elementType: 'geometry',\n            stylers: [{color: '#e5e5e5'}]\n          },\n          {\n            featureType: 'poi.park',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#9e9e9e'}]\n          },\n          {\n            featureType: 'road',\n            elementType: 'geometry',\n            stylers: [{color: '#ffffff'}]\n          },\n          {\n            featureType: 'road.arterial',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#757575'}]\n          },\n          {\n            featureType: 'road.highway',\n            elementType: 'geometry',\n            stylers: [{color: '#dadada'}]\n          },\n          {\n            featureType: 'road.highway',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#616161'}]\n          },\n          {\n            featureType: 'road.local',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#9e9e9e'}]\n          },\n          {\n            featureType: 'transit.line',\n            elementType: 'geometry',\n            stylers: [{color: '#e5e5e5'}]\n          },\n          {\n            featureType: 'transit.station',\n            elementType: 'geometry',\n            stylers: [{color: '#eeeeee'}]\n          },\n          {\n            featureType: 'water',\n            elementType: 'geometry',\n            stylers: [{color: '#c9c9c9'}]\n          },\n          {\n            featureType: 'water',\n            elementType: 'labels.text.fill',\n            stylers: [{color: '#9e9e9e'}]\n          }\n      ]\n  });\n\n  this.markers = [];\n};\n\nMapWrapper.prototype.createSearchBox = function(){\n  // Create the search box and link it to the UI element.\n  var input = document.getElementById('pac-input');\n  var searchBox = new google.maps.places.SearchBox(input);\n  this.googleMap.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\n\n  // Bias the SearchBox results towards current map's viewport.\n  searchBox.addListener('bounds_changed', function() {\n    searchBox.setBounds(this.getBounds());\n  });\n  // Listen for the event fired when the user selects a prediction and retrieve\n  // more details for that place.\n  searchBox.addListener('places_changed', function() {\n    var places = searchBox.getPlaces();\n\n    if (places.length == 0) {\n      return;\n    };\n    // For each place, get the icon, name and location.\n\n    var bounds = new google.maps.LatLngBounds();\n      places.forEach(function(place) {\n        var newPlace = place;\n        if (!place.geometry) {\n          console.log(\"Returned place contains no geometry\");\n          return;\n        };\n\n    this.createMarker(newPlace);\n    this.streetView(place.geometry.location);\n\n      if (place.geometry.viewport) {\n        // Only geocodes have viewport.\n        bounds.union(place.geometry.viewport);\n      } else {\n        bounds.extend(place.geometry.location);\n      }\n    }.bind(this));\n    this.googleMap.fitBounds(bounds);\n  }.bind(this));\n};\nMapWrapper.prototype.getLocationName = function(place){\n  var location = document.getElementById('placeName');\n  var inputForPlace = document.getElementById('name');\n  if(place.name == null){\n    location.innerHTML = \"Your location\";\n    inputForPlace.value = \"Your location\";\n  } else {\n    location.innerHTML = place.name;\n    inputForPlace.value = place.name;\n  }\n\n};\nMapWrapper.prototype.removeMarker = function(){\n  if(this.markers.length >= 1){\n    var last = this.markers.pop();\n    last.setMap(null);\n  }else{\n    console.log(\"nothing to remove\");\n  };\n};\n\nMapWrapper.prototype.createMarker = function(place){\n  this.removeMarker();\n  var icon = {\n    url: place.icon,\n    size: new google.maps.Size(71, 71),\n    origin: new google.maps.Point(0, 0),\n    anchor: new google.maps.Point(17, 34),\n    scaledSize: new google.maps.Size(25, 25)\n  };\n  var newMarker = new google.maps.Marker({\n    map: this.googleMap,\n    title: place.name,\n    icon: icon,\n    position: place.geometry.location\n  });\n  this.getLocationName(place);\n  var locate = place.geometry.location;\n  var newLocationString = '<div class=\"content\">' +\n      '<div class=\"bodyContent\">' +\n      `<h4>Your new location</h4>` +\n      `<p>Lat: ${locate.lat().toFixed(4)} <br> Lng: ${locate.lng().toFixed(4)}</p>` +\n      '</div>' +\n      '</div>';\n  newMarker.infowindow = new google.maps.InfoWindow({\n    content: newLocationString\n  });\n  newMarker.infowindow.open(this.googleMap, newMarker);\n  this.markers.push(newMarker);\n  this.showCoords(newMarker);\n};\nMapWrapper.prototype.streetView = function(location){\n  var panorama = new google.maps.StreetViewPanorama(\n          document.getElementById('pano'), {\n            position: location,\n            pov: {\n              heading: 165,\n              pitch: 0,\n              zoom: 1\n            },\n            visible: true\n          });\n  this.googleMap.setStreetView(panorama);\n};\nMapWrapper.prototype.showCoords = function(marker){\n  var lat = document.getElementById(\"latitude\");\n  var long = document.getElementById(\"longitude\");\n  lat.className = \"locationAdded\";\n  lat.value = marker.position.lat();\n  long.value = marker.position.lng();\n}\n\nMapWrapper.prototype.userLocation = function(){\n  navigator.geolocation.getCurrentPosition(function(position){\n    var coords = {lat: position.coords.latitude, lng: position.coords.longitude};\n    this.googleMap.setCenter(coords);\n    this.googleMap.setMapTypeId(\"roadmap\");\n    this.googleMap.setZoom(14);\n    var marker = new google.maps.Marker({\n      position: coords,\n      infoWindowOpen: false,\n      map: this.googleMap,\n    });\n    this.markers.push(marker);\n    this.getLocationName(position);\n    var contentString = '<div id=\"content\">' +\n    '<div id=\"bodyContent\">' +\n    `<h3 id=\"user-loc\">You are here</h3>` +\n    '</div>' +\n    '</div>';\n    marker.infowindow = new google.maps.InfoWindow({\n      content: contentString\n    });\n    marker.infowindow.open(this.googleMap, marker);\n    marker.infowindowOpen = true;\n    this.showCoords(marker);\n  }.bind(this));\n\n};\n\nmodule.exports = MapWrapper;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/models/mapWrapper.js\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}